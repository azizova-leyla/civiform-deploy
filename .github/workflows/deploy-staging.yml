name: Probe and Deploy Staging

on:
  # Setting this enables manually triggering workflow in the GitHub UI
  # see https://docs.github.com/en/actions/managing-workflow-runs/manually-running-a-workflow
  workflow_dispatch: {}

permissions: read-all

# Two probers running at once can break each other.
concurrency:
  group: stagingenvironment
  cancel-in-progress: true

jobs:
  run_prober:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        
#      - name: Deploy Seattle staging
#        env:
#          AWS_ACCESS_KEY_ID: ${{ secrets.ACCESS_KEY_ID }}
#          AWS_SECRET_ACCESS_KEY: ${{ secrets.SECRET_ACCESS_KEY }}
#        run: bin/deploy -e staging -i civiform/civiform:latest

#      - name: Run prober test
#        env:
#          TEST_USER_LOGIN: ${{ secrets.TEST_USER_LOGIN }}
#          TEST_USER_PASSWORD: ${{ secrets.TEST_USER_PASSWORD }}
#        run: bin/run-prober
      - name: Get Docker Version
        run: docker version
        
      - name: Get Docker Plugins List
        run: docker plugin ls
        
      - name: Get Docker Compose Version 1
        run: docker compose version

      - name: Get Docker-Compose Version 2
        run: docker-compose version
        
#      - name: Get Docker-Compose Version 3
#        run:  /usr/local/lib/docker/cli-plugins/docker-compose version
        
      - name: Get Docker-Compose Version 4
        run: $HOME/.docker/cli-plugins/docker-compose version
        
      - name: Get Docker Compose Paths usr
        run: which /usr/local/lib/docker/cli-plugins/docker-compose
    
      - name: Get Docker-Compose Paths HOME
        run: which $HOME/.docker/cli-plugins/docker-compose
        
        
